---
---

<div
  id="region-modal"
  class="fixed inset-0 z-[9999] hidden items-center justify-center bg-black/50 backdrop-blur-sm p-4"
>
  <div class="bg-cream-surface border border-cream-border rounded-xl p-6 w-full max-w-xs shadow-2xl text-center">
    <p class="text-lg text-text-heading font-heading font-semibold mb-5">Select your shipping region:</p>

    <div class="flex flex-col gap-3">
      <button
        id="btn-us"
        class="py-3 px-4 bg-amber-glow text-white font-semibold rounded-lg hover:bg-amber-dark transition-colors"
      >
        United States
      </button>

      <button
        id="btn-cancel-region"
        class="py-2.5 px-4 bg-cream-muted text-text-muted font-medium rounded-lg hover:bg-cream-border hover:text-text-heading transition-colors"
      >
        Cancel
      </button>
    </div>
  </div>
</div>

<script>
  let currentButton: HTMLElement | null = null;
  const modal = document.getElementById('region-modal');
  const btnUS = document.getElementById('btn-us');
  const btnCancel = document.getElementById('btn-cancel-region');

  function closeModal() {
    modal?.classList.add('hidden');
    modal?.classList.remove('flex');
  }

  function openModal() {
    modal?.classList.remove('hidden');
    modal?.classList.add('flex');
  }

  document.querySelectorAll('.buy-btn').forEach((button) => {
    button.addEventListener('click', () => {
      currentButton = button as HTMLElement;
      openModal();
    });
  });

  btnUS?.addEventListener('click', () => {
    if (currentButton) {
      const url = currentButton.getAttribute('data-url-us');
      closeModal();
      if (url) window.open(url, '_blank');
    }
  });

  btnCancel?.addEventListener('click', closeModal);

  modal?.addEventListener('click', (e) => {
    if (e.target === modal) closeModal();
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
  });
</script>
